:PROPERTIES:
:ID:       5e7e7124-78a0-400f-9cc8-03ded8b3c2d0
:END:
#+title: migrate emails using mbsync

to migrate inbox, perform these steps:

1. configure mbsync to read from the source
2. delete all .mbsyncstate .uidvalidity files
#+begin_src sh :noeval
find . -type f -name '.??*' -delete
#+end_src
3. delete all uids generated by mbsync
#+begin_src sh :noeval
find . -type f -name '*U=*' | { while read f; do mv "$f" "`echo $f | sed -e 's/,U=[0-9]*//'`"; done }
#+end_src
4. verify uids are no longer present
#+begin_src sh :noeval
find . -type f -name '*U=*'
#+end_src
5. turn off the source, and swap it with the target in mbsync config
5. sync again using mbsync to upload to new server
