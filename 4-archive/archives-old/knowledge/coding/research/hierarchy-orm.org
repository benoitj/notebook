#+OPTIONS: reveal_center:t reveal_progress:t reveal_history:t reveal_control:t
#+OPTIONS: reveal_mathjax:t reveal_rolling_links:t reveal_keyboard:t reveal_overview:t num:nil
#+OPTIONS: reveal_width:1200 reveal_height:800
#+OPTIONS: toc:1
#+REVEAL_MARGIN: 0.2
#+REVEAL_MIN_SCALE: 0.5
#+REVEAL_MAX_SCALE: 2.5
#+REVEAL_TRANS: none
#+REVEAL_THEME: night

* table per hierarchy
** schema
#+begin_src sql
CREATE TABLE people 
             ( 
                          id                        INTEGER generated BY DEFAULT AS identity (start WITH 1),
                          type                      VARCHAR(255) NOT NULL, 
                          lastname                  VARCHAR(255), 
                          firstname                 VARCHAR(255), 
                          rank                      INTEGER, 
                          maxteamsize               INTEGER, 
                          entropy                   INTEGER, 
                          hasaccesstorestrictedarea boolean, 
                          medicaldegree             VARCHAR(255), 
                          specialist                boolean, 
                          speciality VARBINARY(255), 
                          specialty VARBINARY(255), 
                          pukeproof boolean, 
                          PRIMARY KEY (id) 
             )
#+end_src
** insert
#+begin_src sql
INSERT INTO people 
            (id, 
             lastname, 
             firstname, 
             medicaldegree, 
             specialist, 
             speciality, 
             type) 
VALUES      (DEFAULT, 
             ?, 
             ?, 
             ?, 
             ?, 
             ?, 
             'Surgeon') 
#+end_src
#+BEGIN_NOTES
  Enter speaker notes here.
#+END_NOTES
** select
#+begin_src sql
SELECT person0_.id                        AS id1_0_, 
       person0_.lastname                  AS LastName3_0_, 
       person0_.firstname                 AS FirstNam4_0_, 
       person0_.rank                      AS Rank5_0_, 
       person0_.maxteamsize               AS MaxTeamS6_0_, 
       person0_.entropy                   AS Entropy7_0_, 
       person0_.hasaccesstorestrictedarea AS HasAcces8_0_, 
       person0_.medicaldegree             AS MedicalD9_0_, 
       person0_.specialist                AS Special10_0_, 
       person0_.speciality                AS Special11_0_, 
       person0_.specialty                 AS Special12_0_, 
       person0_.pukeproof                 AS PukePro13_0_, 
       person0_.type                      AS Type2_0_ 
FROM   people person0_ 
#+end_src
** outcome
Surgeon: RichardGere, specialist in NEUROLOGY

* table per concrete class
** schema
#+begin_src sql
CREATE TABLE directionpeople 
  ( 
     id          INTEGER NOT NULL, 
     lastname    VARCHAR(255), 
     firstname   VARCHAR(255), 
     rank        INTEGER, 
     maxteamsize INTEGER, 
     entropy     INTEGER, 
     PRIMARY KEY (id) 
  )

CREATE TABLE nurses 
  ( 
     id            INTEGER NOT NULL, 
     lastname      VARCHAR(255), 
     firstname     VARCHAR(255), 
     medicaldegree VARCHAR(255), 
     pukeproof     BOOLEAN, 
     PRIMARY KEY (id) 
  ) 

CREATE TABLE psychiatrists 
  ( 
     id            INTEGER NOT NULL, 
     lastname      VARCHAR(255), 
     firstname     VARCHAR(255), 
     medicaldegree VARCHAR(255), 
     specialist    BOOLEAN, 
     specialty     VARBINARY(255), 
     PRIMARY KEY (id) 
  ) 

CREATE TABLE surgeons 
  ( 
     id            INTEGER NOT NULL, 
     lastname      VARCHAR(255), 
     firstname     VARCHAR(255), 
     medicaldegree VARCHAR(255), 
     specialist    BOOLEAN, 
     speciality    VARBINARY(255), 
     PRIMARY KEY (id) 
  ) 

CREATE TABLE technicians 
  ( 
     id                        INTEGER NOT NULL, 
     lastname                  VARCHAR(255), 
     firstname                 VARCHAR(255), 
     rank                      INTEGER, 
     hasaccesstorestrictedarea BOOLEAN, 
     PRIMARY KEY (id) 
#+end_src

** select
#+begin_src sql
SELECT person0_.id                        AS id1_6_, 
       person0_.lastname                  AS LastName2_6_, 
       person0_.firstname                 AS FirstNam3_6_, 
       person0_.rank                      AS Rank1_0_, 
       person0_.maxteamsize               AS MaxTeamS1_3_, 
       person0_.entropy                   AS Entropy1_1_, 
       person0_.hasaccesstorestrictedarea AS HasAcces1_9_, 
       person0_.medicaldegree             AS MedicalD1_4_, 
       person0_.specialist                AS Speciali1_2_, 
       person0_.speciality                AS Speciali1_8_, 
       person0_.specialty                 AS Specialt1_7_, 
       person0_.pukeproof                 AS PukeProo1_5_, 
       person0_.clazz_                    AS clazz_ 
FROM   (SELECT id, 
               lastname, 
               firstname, 
               rank, 
               maxteamsize, 
               entropy, 
               Cast(NULL AS BOOLEAN)        AS HasAccessToRestrictedArea, 
               Cast(NULL AS VARCHAR(100))   AS MedicalDegree, 
               Cast(NULL AS BOOLEAN)        AS Specialist, 
               Cast(NULL AS VARBINARY(100)) AS Speciality, 
               Cast(NULL AS VARBINARY(100)) AS Specialty, 
               Cast(NULL AS BOOLEAN)        AS PukeProof, 
               3                            AS clazz_ 
        FROM   directionpeople 
        UNION ALL 
        SELECT id, 
               lastname, 
               firstname, 
               rank, 
               Cast(NULL AS INT)            AS MaxTeamSize, 
               Cast(NULL AS INT)            AS Entropy, 
               hasaccesstorestrictedarea, 
               Cast(NULL AS VARCHAR(100))   AS MedicalDegree, 
               Cast(NULL AS BOOLEAN)        AS Specialist, 
               Cast(NULL AS VARBINARY(100)) AS Speciality, 
               Cast(NULL AS VARBINARY(100)) AS Specialty, 
               Cast(NULL AS BOOLEAN)        AS PukeProof, 
               4                            AS clazz_ 
        FROM   technicians 
        UNION ALL 
        SELECT id, 
               lastname, 
               firstname, 
               Cast(NULL AS INT)            AS Rank, 
               Cast(NULL AS INT)            AS MaxTeamSize, 
               Cast(NULL AS INT)            AS Entropy, 
               Cast(NULL AS BOOLEAN)        AS HasAccessToRestrictedArea, 
               medicaldegree, 
               specialist, 
               speciality, 
               Cast(NULL AS VARBINARY(100)) AS Specialty, 
               Cast(NULL AS BOOLEAN)        AS PukeProof, 
               7                            AS clazz_ 
        FROM   surgeons 
        UNION ALL 
        SELECT id, 
               lastname, 
               firstname, 
               Cast(NULL AS INT)            AS Rank, 
               Cast(NULL AS INT)            AS MaxTeamSize, 
               Cast(NULL AS INT)            AS Entropy, 
               Cast(NULL AS BOOLEAN)        AS HasAccessToRestrictedArea, 
               medicaldegree, 
               specialist, 
               Cast(NULL AS VARBINARY(100)) AS Speciality, 
               specialty, 
               Cast(NULL AS BOOLEAN)        AS PukeProof, 
               8                            AS clazz_ 
        FROM   psychiatrists 
        UNION ALL 
        SELECT id, 
               lastname, 
               firstname, 
               Cast(NULL AS INT)            AS Rank, 
               Cast(NULL AS INT)            AS MaxTeamSize, 
               Cast(NULL AS INT)            AS Entropy, 
               Cast(NULL AS BOOLEAN)        AS HasAccessToRestrictedArea, 
               medicaldegree, 
               Cast(NULL AS BOOLEAN)        AS Specialist, 
               Cast(NULL AS VARBINARY(100)) AS Speciality, 
               Cast(NULL AS VARBINARY(100)) AS Specialty, 
               pukeproof, 
               9                            AS clazz_ 
        FROM   nurses) person0_
#+end_src
** outcome
Surgeon: RichardGere, specialist in NEUROLOGY

* table per class
** schema
#+begin_src sql

CREATE TABLE directionpeople 
             ( 
                          id      INTEGER NOT NULL, 
                          entropy INTEGER, 
                          PRIMARY KEY (id) 
             );

CREATE TABLE doctors 
             ( 
                          id         INTEGER NOT NULL, 
                          specialist BOOLEAN, 
                          PRIMARY KEY (id) 
             );

CREATE TABLE managementpeople 
             ( 
                          id          INTEGER NOT NULL, 
                          maxteamsize INTEGER, 
                          PRIMARY KEY (id) 
             );

CREATE TABLE medicalpeople 
             ( 
                          id            INTEGER NOT NULL, 
                          medicaldegree VARCHAR(255), 
                          PRIMARY KEY (id) 
             );

CREATE TABLE nurses 
             ( 
                          id        INTEGER NOT NULL, 
                          pukeproof BOOLEAN, 
                          PRIMARY KEY (id) 
             );

CREATE TABLE people 
             ( 
                          id        INTEGER generated BY DEFAULT AS identity (start WITH 1), 
                          lastname  VARCHAR(255), 
                          firstname VARCHAR(255), 
                          PRIMARY KEY (id) 
             );

CREATE TABLE psychiatrists 
             ( 
                          id INTEGER NOT NULL, 
                          specialty VARBINARY(255), 
                          PRIMARY KEY (id) 
             );

CREATE TABLE surgeons 
             ( 
                          id INTEGER NOT NULL, 
                          speciality VARBINARY(255), 
                          PRIMARY KEY (id) 
             );

CREATE TABLE technicians 
             ( 
                          id                        INTEGER NOT NULL, 
                          hasaccesstorestrictedarea BOOLEAN, 
                          PRIMARY KEY (id) 
             );

ALTER TABLE administrativepeople ADD CONSTRAINT fkjhmq3bw0v00kgvnu9fhrvj0s0 FOREIGN KEY (id) REFERENCES people;

ALTER TABLE directionpeople ADD CONSTRAINT fkbxn54fr9oej0y1w7tdoynldy3 FOREIGN KEY (id) REFERENCES managementpeople;

ALTER TABLE doctors ADD CONSTRAINT fkce1k5qa7ene4gnt27c81tj741 FOREIGN KEY (id) REFERENCES medicalpeople;

ALTER TABLE managementpeople ADD CONSTRAINT fks6x4m0kvgmlckf3ed6p7w6xr6 FOREIGN KEY (id) REFERENCES administrativepeople;

ALTER TABLE medicalpeople ADD CONSTRAINT fk45bum1qg9evarb63bakj7ypse FOREIGN KEY (id) REFERENCES people;

ALTER TABLE nurses ADD CONSTRAINT fk7f69axsbr4pd2sqjgjwksqxp9 FOREIGN KEY (id) REFERENCES medicalpeople;

ALTER TABLE psychiatrists ADD CONSTRAINT fkg8f01htswsw7yh4wu02r1vfg7 FOREIGN KEY (id) REFERENCES doctors;

ALTER TABLE surgeons ADD CONSTRAINT fkt9defbblnwshpxdixbt9v9tes FOREIGN KEY (id) REFERENCES doctors;

ALTER TABLE technicians ADD CONSTRAINT fkfdak3i8qd4cw2avmsm2qxew3l FOREIGN KEY (id) REFERENCES administrativepeople;

#+end_src
** insert
#+begin_src sql
#+end_src
** select
#+begin_src sql
SELECT person0_.id                          AS id1_6_, 
       person0_.lastname                    AS LastName2_6_, 
       person0_.firstname                   AS FirstNam3_6_, 
       person0_1_.rank                      AS Rank2_0_, 
       person0_2_.maxteamsize               AS MaxTeamS2_3_, 
       person0_3_.entropy                   AS Entropy2_1_, 
       person0_4_.hasaccesstorestrictedarea AS HasAcces2_9_, 
       person0_5_.medicaldegree             AS MedicalD2_4_, 
       person0_6_.specialist                AS Speciali2_2_, 
       person0_7_.speciality                AS Speciali2_8_, 
       person0_8_.specialty                 AS Specialt2_7_, 
       person0_9_.pukeproof                 AS PukeProo2_5_, 
       CASE 
         WHEN person0_3_.id IS NOT NULL THEN 3 
         WHEN person0_2_.id IS NOT NULL THEN 2 
         WHEN person0_4_.id IS NOT NULL THEN 4 
         WHEN person0_7_.id IS NOT NULL THEN 7 
         WHEN person0_8_.id IS NOT NULL THEN 8 
         WHEN person0_6_.id IS NOT NULL THEN 6 
         WHEN person0_9_.id IS NOT NULL THEN 9 
         WHEN person0_1_.id IS NOT NULL THEN 1 
         WHEN person0_5_.id IS NOT NULL THEN 5 
         WHEN person0_.id IS NOT NULL THEN 0 
       end                                  AS clazz_ 
FROM   people person0_ 
       LEFT OUTER JOIN administrativepeople person0_1_ 
                    ON person0_.id = person0_1_.id 
       LEFT OUTER JOIN managementpeople person0_2_ 
                    ON person0_.id = person0_2_.id 
       LEFT OUTER JOIN directionpeople person0_3_ 
                    ON person0_.id = person0_3_.id 
       LEFT OUTER JOIN technicians person0_4_ 
                    ON person0_.id = person0_4_.id 
       LEFT OUTER JOIN medicalpeople person0_5_ 
                    ON person0_.id = person0_5_.id 
       LEFT OUTER JOIN doctors person0_6_ 
                    ON person0_.id = person0_6_.id 
       LEFT OUTER JOIN surgeons person0_7_ 
                    ON person0_.id = person0_7_.id 
       LEFT OUTER JOIN psychiatrists person0_8_ 
                    ON person0_.id = person0_8_.id 
       LEFT OUTER JOIN nurses person0_9_ 
                    ON person0_.id = person0_9_.id
 #+end_src
** outcome
Surgeon: RichardGere, specialist in NEUROLOGY

* table per class with discriminator
** schema
#+begin_src sql
CREATE TABLE directionpeople 
             ( 
                          id      INTEGER NOT NULL, 
                          entropy INTEGER, 
                          PRIMARY KEY (id) 
             );

CREATE TABLE doctors 
             ( 
                          id         INTEGER NOT NULL, 
                          specialist BOOLEAN, 
                          PRIMARY KEY (id) 
             );

CREATE TABLE managementpeople 
             ( 
                          id          INTEGER NOT NULL, 
                          maxteamsize INTEGER, 
                          PRIMARY KEY (id) 
             );

CREATE TABLE medicalpeople 
             ( 
                          id            INTEGER NOT NULL, 
                          medicaldegree VARCHAR(255), 
                          PRIMARY KEY (id) 
             );

CREATE TABLE nurses 
             ( 
                          id        INTEGER NOT NULL, 
                          pukeproof BOOLEAN, 
                          PRIMARY KEY (id) 
             );

CREATE TABLE people 
             ( 
                          id        INTEGER generated BY DEFAULT AS identity (start WITH 1), 
                          type      VARCHAR(255) NOT NULL, 
                          lastname  VARCHAR(255), 
                          firstname VARCHAR(255), 
                          PRIMARY KEY (id) 
             );

CREATE TABLE psychiatrists 
             ( 
                          id INTEGER NOT NULL, 
                          specialty VARBINARY(255), 
                          PRIMARY KEY (id) 
             );

CREATE TABLE surgeons 
             ( 
                          id INTEGER NOT NULL, 
                          speciality VARBINARY(255), 
                          PRIMARY KEY (id) 
             );

CREATE TABLE technicians 
             ( 
                          id                        INTEGER NOT NULL, 
                          hasaccesstorestrictedarea BOOLEAN, 
                          PRIMARY KEY (id) 
             );

ALTER TABLE administrativepeople ADD CONSTRAINT fkjhmq3bw0v00kgvnu9fhrvj0s0 FOREIGN KEY (id) REFERENCES people;

ALTER TABLE directionpeople ADD CONSTRAINT fkbxn54fr9oej0y1w7tdoynldy3 FOREIGN KEY (id) REFERENCES managementpeople;

ALTER TABLE doctors ADD CONSTRAINT fkce1k5qa7ene4gnt27c81tj741 FOREIGN KEY (id) REFERENCES medicalpeople;

ALTER TABLE managementpeople ADD CONSTRAINT fks6x4m0kvgmlckf3ed6p7w6xr6 FOREIGN KEY (id) REFERENCES administrativepeople;

ALTER TABLE medicalpeople ADD CONSTRAINT fk45bum1qg9evarb63bakj7ypse FOREIGN KEY (id) REFERENCES people;

ALTER TABLE nurses ADD CONSTRAINT fk7f69axsbr4pd2sqjgjwksqxp9 FOREIGN KEY (id) REFERENCES medicalpeople;

ALTER TABLE psychiatrists ADD CONSTRAINT fkg8f01htswsw7yh4wu02r1vfg7 FOREIGN KEY (id) REFERENCES doctors;

ALTER TABLE surgeons ADD CONSTRAINT fkt9defbblnwshpxdixbt9v9tes FOREIGN KEY (id) REFERENCES doctors;

ALTER TABLE technicians ADD CONSTRAINT fkfdak3i8qd4cw2avmsm2qxew3l FOREIGN KEY (id) REFERENCES administrativepeople;


#+end_src
** insert
#+begin_src sql
INSERT INTO people 
            (id, 
             lastname, 
             firstname, 
             type) 
VALUES      (DEFAULT, 
             ?, 
             ?, 
             'Surgeons')
#+end_src
** select
#+begin_src sql
SELECT person0_.id                          AS id1_6_, 
       person0_.lastname                    AS LastName3_6_, 
       person0_.firstname                   AS FirstNam4_6_, 
       person0_1_.rank                      AS Rank2_0_, 
       person0_2_.maxteamsize               AS MaxTeamS2_3_, 
       person0_3_.entropy                   AS Entropy2_1_, 
       person0_4_.hasaccesstorestrictedarea AS HasAcces2_9_, 
       person0_5_.medicaldegree             AS MedicalD2_4_, 
       person0_6_.specialist                AS Speciali2_2_, 
       person0_7_.speciality                AS Speciali2_8_, 
       person0_8_.specialty                 AS Specialt2_7_, 
       person0_9_.pukeproof                 AS PukeProo2_5_, 
       person0_.type                        AS Type2_6_ 
FROM   people person0_ 
       LEFT OUTER JOIN administrativepeople person0_1_ 
                    ON person0_.id = person0_1_.id 
       LEFT OUTER JOIN managementpeople person0_2_ 
                    ON person0_.id = person0_2_.id 
       LEFT OUTER JOIN directionpeople person0_3_ 
                    ON person0_.id = person0_3_.id 
       LEFT OUTER JOIN technicians person0_4_ 
                    ON person0_.id = person0_4_.id 
       LEFT OUTER JOIN medicalpeople person0_5_ 
                    ON person0_.id = person0_5_.id 
       LEFT OUTER JOIN doctors person0_6_ 
                    ON person0_.id = person0_6_.id 
       LEFT OUTER JOIN surgeons person0_7_ 
                    ON person0_.id = person0_7_.id 
       LEFT OUTER JOIN psychiatrists person0_8_ 
                    ON person0_.id = person0_8_.id 
       LEFT OUTER JOIN nurses person0_9_ 
                    ON person0_.id = person0_9_.id 
#+end_src
** outcome
Surgeon: RichardGere, specialist in NEUROLOGY
