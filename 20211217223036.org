:PROPERTIES:
:ID:       0411381d-cb29-4774-af6c-0dec028db60e
:END:
#+title: Emacs for Java

* Migration from intellij to emacs lsp-java
** DONE navigation

Navigating is quite important when coding. This section include navigation to projects, files, types, symbols, and references.

|------------------------------+---------------------------------------------+---------------------------------------------------+-------------+-----------------------------------------------------|
| feature                      | IntelliJ                                    | emacs function                                    | mode        |                                                     |
|------------------------------+---------------------------------------------+---------------------------------------------------+-------------+-----------------------------------------------------|
| find project                 | file menu open                              | project-switch-project                            | project     |                                                     |
| find file                    | C-S-n                                       | project-find-file or projectile-find-file         | project     |                                                     |
| find type                    | C-n                                         | consult-lsp-symbol                                | consult-lsp |                                                     |
| type def at point            | C-click                                     | lsp-find-type-definition                          | lsp         |                                                     |
| var def at point             | C-click                                     | lsp-find-definition                               | lsp         |                                                     |
| find usages                  | M-F7                                        | lsp-find-references                               | lsp         |                                                     |
| highlight a symbol in buffer | highlight a symbol highlights it everywhere | lsp-find-declaration                              | lsp         |                                                     |
|                              |                                             | lsp-document-highlight                            | lsp         | automatically highlight related references at point |
| find related test / type     | C-S-t                                       | tgt-toggle                                        | toggle-test |                                                     |
|                              |                                             | projectile-toggle-between-implementation-and-test | projectile  |                                                     |
|------------------------------+---------------------------------------------+---------------------------------------------------+-------------+-----------------------------------------------------|


** Search and Replace

Search and Replace capabilities include any text search and replace operations in:
1. the current buffer
2. all files within the project

|--------------------------+----------+------------------------------------------------------------+------------------------|
| feature                  | IntelliJ | Emacs                                                      | mode                   |
|--------------------------+----------+------------------------------------------------------------+------------------------|
| current buffer - search  | C-f      | / and n                                                    | evil                   |
|                          |          | isearch-forward                                            | isearch                |
|                          |          | occur                                                      | occur                  |
|                          |          | consult-line                                               | consult                |
|--------------------------+----------+------------------------------------------------------------+------------------------|
| current buffer - replace | C-r      | / and vim commands                                         | evil                   |
|                          |          | :%s///                                                     | evil                   |
|                          |          | replace-regex                                              | core                   |
|                          |          | replace-string                                             | core                   |
|--------------------------+----------+------------------------------------------------------------+------------------------|
| project files - search   | C-S-f    | consult-ripgrep                                            | consult                |
|                          |          | consult-grep                                               | consult                |
|                          |          | consult-git-grep                                           | consult                |
|                          |          | multi-occur                                                | multi-occur            |
|--------------------------+----------+------------------------------------------------------------+------------------------|
| project files - replace  | C-S-r    | consult-*grep                                              | consult                |
|                          |          | multi-occur                                                | multi-occur            |
|                          |          | <any above> -> embark-export -> wgrep-change-to-wgrep-mode | embark, consult, wgrep |
|--------------------------+----------+------------------------------------------------------------+------------------------|

** DONE editing
|--------------------------+--------------+------------------------+------------------|
| feature                  | IntelliJ     | Emacs                  | mode             |
|--------------------------+--------------+------------------------+------------------|
| rectangular editing      | M-mouse drag | C-v                    | evil             |
| edit using multi-cursors | M-j M-J      | mc/mark-next-like-this | multiple-cursors |
|                          |              | mc/mark-prev-like-this | multiple-cursors |
|                          |              | mc/mark-all-like-this  | multiple-cursors |
|--------------------------+--------------+------------------------+------------------|

** DONE information / documentation
|----------------------+----------------------------+-----------------------------+-------------+-------------------------------------|
| description          | intellij                   | emacs                       | mode        | comment                             |
|----------------------+----------------------------+-----------------------------+-------------+-------------------------------------|
| describe at point    | mouse over                 | lsp-describe-thing-at-point | lsp         | show in new frame                   |
|                      |                            | lsp-ui-doc-show             | lsp         | show popup                          |
|                      |                            | lsp-ui-doc-glance           | lsp         | show/hide between still/typing      |
| from depends sources | C-click + download sources | lsp-find-type-definition    | lsp         | set lsp-java-maven-download-sources |
| List project tasks   | panel                      | magit-todos-list            | magit-todos |                                     |
|----------------------+----------------------------+-----------------------------+-------------+-------------------------------------|

** linting / errors
|------------------------------+-------------------+--------------------------+---------------+---------|
| description                  | intellij          | emacs                    | mode          | comment |
|------------------------------+-------------------+--------------------------+---------------+---------|
| Linting errors in place      | fringe + fontface | flycheck                 | flycheck-mode |         |
| List project errors/warnings | tool windows      | lsp-treemacs-errors-list | lsp-treemacs  |         |
|------------------------------+-------------------+--------------------------+---------------+---------|

*** TODO inventory of linting errors
**** TODO unused references/method/member/class
**** TODO generics unchecked used

** TODO code formatting [0/2]

The Java style I've been using for some time is the [[https://google.github.io/styleguide/javaguide.html][Google Java style]].

there are two ways to do this:
1. using a formatter within Emacs
2. using lsp-mode java formatter

*** TODO formatter within emacs
*** TODO lsp-mode java formatter

| description        | intellij | emacs             | mode          |
|--------------------+----------+-------------------+---------------|
| dwim refactor code | M-S-l    | lsp-format-buffer | lsp-java-mode |
|                    |          | lsp-format-region |               |

#+begin_src emacs-lisp :noeval
  (setq lsp-java-format-settings-url "https://raw.githubusercontent.com/google/styleguide/gh-pages/eclipse-java-google-style.xml")
  (setq lsp-java-format-enabled t)
  (setq lsp-java-format-on-type-enabled t)
#+end_src

** TODO runners
| description | intellij | emacs                             | mode                     |
|-------------+----------+-----------------------------------+--------------------------|
| junit test  |          | dap-java-run*                     | dap-java-mode            |
|             |          | dap-java-debug*                   | dap-java-mode            |
| cucumber    |          |                                   |                          |
| main        |          | dap-hydra                         | dap-mode                 |
| springboot  |          |                                   | install STS4 integration |
| maven       |          | vterm or lsp-java-compile-project |                          |

** TODO refactor
| description      | intellij | emacs |   |
|------------------+----------+-------+---|
| Extract constant |          |       |   |
| Extract local    |          |       |   |
| Extract method   |          |       |   |
| pull up          |          |       |   |
| push down        |          |       |   |
| Rename symbol                   |

** TODO code actions
| description                                   | intellij  | emacs |
|-----------------------------------------------+-----------+-------|
| Execute code action                           | M-<Enter> |       |
| organize imports                              | M-C-o     |       |
| create class, fct, attribute                  |           |       |
| introduce local variable (final, or var type) |           |       |
| Add throws exception                          |           |       |
| Add import                                    |           |       |
| Add unimplemented methods                     |           |       |

** TODO generators
| description      | intellij | emacs |
|------------------+----------+-------|
| builder          |          |       |
| getter/setter    |          |       |
| toString         |          |       |
| equals/hashcode  |          |       |
| method overrides |          |       |

** TODO debugging
| Key binding   | Description                     |
|---------------+---------------------------------|
| ~SPC m p u~   | Refresh user settings           |
| ~SPC m q r~   | Restart workspace               |
| ~SPC m r c p~ | Create parameter                |
| ~SPC m r c f~ | Create field                    |
| ~SPC m r c i~ | Convert to static import        |
| ~SPC m r a a~ | Assign all parameters to fields |
| ~SPC m r a f~ | Assign parameter to field       |
| ~SPC m c c~   | Build project                   |
| ~SPC m c p~   | Create spring boot project      |
| ~SPC m a n~   | Actionable notifications        |
| ~SPC m =~     | Format code                     |

** TODO Tools [0/2]
*** TODO Restclient [0/3]

Basic use cases:
- call http API
- override headers
- pass payloads
- extract values from a response and use them in url or body
- use different "environments" API variables

evaluate possible options:
**** TODO [[https://github.com/zweifisch/ob-http][ob-http]]
**** TODO verb
**** TODO restclient-mode
*** TODO SQL client [0/5]
found a possible options:
**** TODO lsp sql called https://emacs-lsp.github.io/lsp-mode/page/lsp-sqls/
**** TODO https://truongtx.me/2014/08/23/setup-emacs-as-an-sql-database-client
**** TODO https://github.com/Trevoke/sqlup-mode.el
**** TODO https://github.com/Fuco1/sql-workbench
**** TODO https://github.com/kostafey/ejc-sql
* other things [0/1]
** TODO review what xref can do
